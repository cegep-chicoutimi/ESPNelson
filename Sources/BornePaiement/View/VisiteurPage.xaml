<UserControl x:Class="BornePaiement.View.VisiteurPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/xaml"
      xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:local="clr-namespace:BornePaiement.ViewModel"
      KeyDown="Page_KeyDown">

    <!-- Ajout du ViewModel en DataContext -->
    <UserControl.DataContext>
        <local:VisiteurVM/>
    </UserControl.DataContext>

    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20">

        <!-- Message d'attente du scan -->
        <TextBlock Text="Veuillez scanner votre ticket..." FontSize="20" FontWeight="Bold" Foreground="Gray" 
                   Visibility="{Binding TicketValide, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=false}"/>

        <!-- Affichage des informations si le ticket est valide -->
        <StackPanel Visibility="{Binding TicketValide, Converter={StaticResource BooleanToVisibilityConverter}}">
            <TextBlock Text="Informations du Ticket" FontSize="20" FontWeight="Bold" Margin="0,10"/>

            <TextBlock Text="{Binding TicketInfo}" FontSize="16" FontWeight="Bold" Foreground="DarkGreen" Margin="5"/>

            <!-- Bouton de confirmation -->
            <Button Content="Confirmer le paiement" Command="{Binding ConfirmerPaiementCommand}" Width="200" Margin="10"/>
        </StackPanel>

        <!-- Message d'erreur si ticket invalide -->
        <TextBlock Text="❌ Ticket invalide !" FontSize="16" Foreground="Red" FontWeight="Bold"
                   Visibility="{Binding TicketInvalide, Converter={StaticResource BooleanToVisibilityConverter}}"/>
    </StackPanel>
</UserControl>
